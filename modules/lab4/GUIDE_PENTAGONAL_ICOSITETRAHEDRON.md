# üî∑ –ì–∞–π–¥: –ü–∏—à–µ–º PentagonalIcositetrahedronRenderer —Å –Ω—É–ª—è

> –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é OpenGL-—Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ –ø–µ–Ω—Ç–∞–≥–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∫–æ—Å–∏—Ç–µ—Ç—Ä–∞—ç–¥—Ä–∞.
> –ö –∫–æ–Ω—Ü—É –≥–∞–π–¥–∞ —É —Ç–µ–±—è –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥–µ–æ–º–µ—Ç—Ä–∏—é
> –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞ –∏ —Ä–∏—Å—É–µ—Ç –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

---

## üìñ –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ß—Ç–æ –º—ã —Å—Ç—Ä–æ–∏–º –∏ –∑–∞—á–µ–º](#1--—á—Ç–æ-–º—ã-—Å—Ç—Ä–æ–∏–º-–∏-–∑–∞—á–µ–º)
2. [–°–∫–µ–ª–µ—Ç –∫–ª–∞—Å—Å–∞ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã](#2--—Å–∫–µ–ª–µ—Ç-–∫–ª–∞—Å—Å–∞-–∏-–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)
3. [–í–µ—Ä—à–∏–Ω—ã –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞ ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã DMcCooey](#3--–≤–µ—Ä—à–∏–Ω—ã-–º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞--–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã-dmccooey)
4. [–ì—Ä–∞–Ω–∏ ‚Äî 24 –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∞](#4--–≥—Ä–∞–Ω–∏--24-–ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∞)
5. [–ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤](#5--–ø–∞–ª–∏—Ç—Ä–∞-—Ü–≤–µ—Ç–æ–≤)
6. [–¢—Ä–∏–∞–Ω–≥—É–ª—è—Ü–∏—è ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∏ –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏](#6--—Ç—Ä–∏–∞–Ω–≥—É–ª—è—Ü–∏—è--–ø—Ä–µ–≤—Ä–∞—â–∞–µ–º-–ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∏-–≤-—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏)
7. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ä–º–∞–ª–µ–π ‚Äî —á—Ç–æ–±—ã –≥—Ä–∞–Ω–∏ —Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–∞—Ä—É–∂—É](#7--–ø—Ä–æ–≤–µ—Ä–∫–∞-–Ω–æ—Ä–º–∞–ª–µ–π--—á—Ç–æ–±—ã-–≥—Ä–∞–Ω–∏-—Å–º–æ—Ç—Ä–µ–ª–∏-–Ω–∞—Ä—É–∂—É)
8. [–í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è](#8--–≤–µ–∫—Ç–æ—Ä–Ω–æ–µ-–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ--–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è-—Ñ—É–Ω–∫—Ü–∏—è)
9. [–®–µ–π–¥–µ—Ä–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞](#9--—à–µ–π–¥–µ—Ä–Ω–∞—è-–ø—Ä–æ–≥—Ä–∞–º–º–∞)
10. [–ú–∞—Ç—Ä–∏—Ü—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏](#10--–º–∞—Ç—Ä–∏—Ü—ã-—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏)
11. [–ë—É—Ñ–µ—Ä—ã ‚Äî –º–æ—Å—Ç –º–µ–∂–¥—É CPU –∏ GPU](#11--–±—É—Ñ–µ—Ä—ã--–º–æ—Å—Ç-–º–µ–∂–¥—É-cpu-–∏-gpu)
12. [–§—É–Ω–∫—Ü–∏—è draw ‚Äî —Å–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–º–µ—Å—Ç–µ](#12--—Ñ—É–Ω–∫—Ü–∏—è-draw--—Å–æ–±–∏—Ä–∞–µ–º-–≤—Å—ë-–≤–º–µ—Å—Ç–µ)
13. [–ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞](#13--–ø–æ–ª–Ω–∞—è-–∫–∞—Ä—Ç–∏–Ω–∞)

---

## 1. üßä –ß—Ç–æ –º—ã —Å—Ç—Ä–æ–∏–º –∏ –∑–∞—á–µ–º

**–ü–µ–Ω—Ç–∞–≥–æ–Ω–∞–ª—å–Ω—ã–π –∏–∫–æ—Å–∏—Ç–µ—Ç—Ä–∞—ç–¥—Ä** ‚Äî —ç—Ç–æ –∫–∞—Ç–∞–ª–∞–Ω–æ–≤—Å–∫–æ–µ —Ç–µ–ª–æ, –¥–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫ –∫—É—Ä–Ω–æ—Å–æ–º—É –∫—É–±—É.
–ó–≤—É—á–∏—Ç —Å—Ç—Ä–∞—à–Ω–æ, –Ω–æ –ø–æ —Å—É—Ç–∏ —ç—Ç–æ –∫—Ä–∞—Å–∏–≤—ã–π –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫ —Å —Ç–∞–∫–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

| –°–≤–æ–π—Å—Ç–≤–æ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –í–µ—Ä—à–∏–Ω | 38 |
| –ì—Ä–∞–Ω–µ–π | 24 (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∏) |
| –†—ë–±–µ—Ä | 60 |
| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å | –•–∏—Ä–∞–ª—å–Ω–æ–µ —Ç–µ–ª–æ (–∫–∞–∫ –ª–µ–≤–∞—è –∏ –ø—Ä–∞–≤–∞—è –ø–µ—Ä—á–∞—Ç–∫–∏ ‚Äî –∑–µ—Ä–∫–∞–ª—å–Ω—ã–µ, –Ω–æ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç) |

OpenGL —É–º–µ–µ—Ç —Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ **—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏**. –ó–Ω–∞—á–∏—Ç, –Ω–∞–º –Ω—É–∂–Ω–æ:
1. –ó–∞–¥–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã 38 –≤–µ—Ä—à–∏–Ω
2. –û–ø–∏—Å–∞—Ç—å 24 –ø—è—Ç–∏—É–≥–æ–ª—å–Ω—ã—Ö –≥—Ä–∞–Ω–∏
3. –†–∞–∑–±–∏—Ç—å –∫–∞–∂–¥—ã–π –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å—ë —ç—Ç–æ –≤ GPU –∏ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ª–µ–ø–∏—à—å —Ñ–∏–≥—É—Ä—É –∏–∑ –ø–ª–∞—Å—Ç–∏–ª–∏–Ω–∞: —Å–Ω–∞—á–∞–ª–∞ —Å—Ç–∞–≤–∏—à—å —Ç–æ—á–∫–∏ (–≤–µ—Ä—à–∏–Ω—ã),
–ø–æ—Ç–æ–º –Ω–∞—Ç—è–≥–∏–≤–∞–µ—à—å –º–µ–∂–¥—É –Ω–∏–º–∏ –≥—Ä–∞–Ω–∏, –∞ –ø–æ—Ç–æ–º —Ä–∞–∑—Ä–µ–∑–∞–µ—à—å –∫–∞–∂–¥—É—é –≥—Ä–∞–Ω—å –Ω–∞ –¥–æ–ª—å–∫–∏-—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏,
–ø–æ—Ç–æ–º—É —á—Ç–æ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∞–∫–æ–π —è–∑—ã–∫.

---

## 2. üèó –°–∫–µ–ª–µ—Ç –∫–ª–∞—Å—Å–∞ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

–ù–∞—á–Ω—ë–º —Å –æ—Å–Ω–æ–≤—ã ‚Äî —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `PentagonalIcositetrahedronRenderer.kt` –∏ –æ–±—ä—è–≤–∏–º
–∫–∞—Ä–∫–∞—Å –∫–ª–∞—Å—Å–∞.

```kotlin
package ru.iandreyshev.cglab4.pentagonalicositetrahedron.ui

import android.content.res.Resources
import android.opengl.GLES30
import android.opengl.Matrix
import ru.iandreyshev.cglab4.R
import ru.iandreyshev.cglab4.pentagonalicositetrahedron.presentation.PentagonalIcositetrahedronState
import ru.iandreyshev.core.createProgramGLES30
import java.nio.ByteBuffer
import java.nio.ByteOrder
import java.nio.FloatBuffer
```

–¢–µ–ø–µ—Ä—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã ‚Äî –æ–Ω–∏ –≥–æ–≤–æ—Ä—è—Ç, —Å–∫–æ–ª—å–∫–æ —á–∏—Å–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–¥–Ω—É –≤–µ—Ä—à–∏–Ω—É:

```kotlin
// –ö–∞–∂–¥–∞—è –≤–µ—Ä—à–∏–Ω–∞ –≤ 3D = —Ç—Ä–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: x, y, z
private const val COORDS_PER_VERTEX = 3

// –ö–∞–∂–¥—ã–π —Ü–≤–µ—Ç = —á–µ—Ç—ã—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: red, green, blue, alpha (–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å)
private const val COLORS_PER_VERTEX = 4
```

–ò —Å–∞–º –∫–ª–∞—Å—Å —Å —Ç—Ä–µ–º—è –ø–æ–ª—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∑–∞–ø–æ–ª–Ω–∏–º –≤ `init`:

```kotlin
class PentagonalIcositetrahedronRenderer(res: Resources) {

    private val vertices: FloatArray   // –í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –ø–æ–¥—Ä—è–¥
    private val colors: FloatArray     // –í—Å–µ —Ü–≤–µ—Ç–∞ –≤–µ—Ä—à–∏–Ω –ø–æ–¥—Ä—è–¥
    private val vertexCount: Int       // –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –≤–µ—Ä—à–∏–Ω (–¥–ª—è glDrawArrays)

    init {
        val (verts, cols) = generatePentagonalIcositetrahedron()
        vertices = verts
        colors = cols
        vertexCount = vertices.size / COORDS_PER_VERTEX
    }
    // ... –¥–∞–ª—å—à–µ –±—É–¥–µ–º –∑–∞–ø–æ–ª–Ω—è—Ç—å
}
```

> üí° `vertexCount` ‚Äî —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ—Ä—à–∏–Ω, –∞ –Ω–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤. –ï—Å–ª–∏ —É –Ω–∞—Å 360 –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
> (float–æ–≤), —Ç–æ –≤–µ—Ä—à–∏–Ω = 360 / 3 = 120. –ê —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ = 120 / 3 = 40... –Ω–æ —É –Ω–∞—Å –∏—Ö
> –±—É–¥–µ—Ç 120 (–ø–æ 5 –Ω–∞ –∫–∞–∂–¥—É—é –∏–∑ 24 –≥—Ä–∞–Ω–µ–π = 120 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, 360 –≤–µ—Ä—à–∏–Ω).

---

## 3. üìç –í–µ—Ä—à–∏–Ω—ã –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞ ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã DMcCooey

–û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã 38 –≤–µ—Ä—à–∏–Ω? –ú–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å –∏—Ö —Å–∞–º–æ–º—É,
–Ω–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫ –î—ç–≤–∏–¥ –ú–∞–∫–∫—É–∏ (DMcCooey) —É–∂–µ —Å–¥–µ–ª–∞–ª —ç—Ç–æ –∑–∞ –Ω–∞—Å. –ï–≥–æ **–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** ‚Äî
—ç—Ç–æ –≥–æ—Ç–æ–≤—ã–µ —á–∏—Å–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –≤–µ—Ä—à–∏–Ω—ã –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–Ω–æ–π —Å—Ñ–µ—Ä–æ–π —Ä–∞–¥–∏—É—Å–æ–º ~1.36.

–í—Å–µ 38 –≤–µ—Ä—à–∏–Ω —Å—Ç—Ä–æ—è—Ç—Å—è –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç:

```kotlin
private fun generatePentagonalIcositetrahedron(): Pair<FloatArray, FloatArray> {
    val C0 = 0.2187966430f   // –ú–∞–ª–µ–Ω—å–∫–æ–µ —Å–º–µ—â–µ–Ω–∏–µ
    val C1 = 0.7401837414f   // –°—Ä–µ–¥–Ω–µ–µ
    val C2 = 1.0236561781f   // –ë–æ–ª—å—à–æ–µ
    val C3 = 1.3614101519f   // –°–∞–º–æ–µ –±–æ–ª—å—à–æ–µ (–¥–ª—è –æ—Å–µ–≤—ã—Ö –≤–µ—Ä—à–∏–Ω)
```

–í–µ—Ä—à–∏–Ω—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –≥—Ä—É–ø–ø—ã:

**–û—Å–µ–≤—ã–µ (V0‚ÄìV5)** ‚Äî –ª–µ–∂–∞—Ç –ø—Ä—è–º–æ –Ω–∞ –æ—Å—è—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —Ç—ã –≤–æ—Ç–∫–Ω—É–ª
—Å–ø–∏—Ü—ã —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä —Ñ–∏–≥—É—Ä—ã –≤–¥–æ–ª—å X, Y –∏ Z:

```kotlin
    val polyVerts = arrayOf(
        floatArrayOf( C3,   0f,   0f),   // V0  –Ω–∞ –æ—Å–∏ +X
        floatArrayOf(-C3,   0f,   0f),   // V1  –Ω–∞ –æ—Å–∏ -X
        floatArrayOf(  0f,  C3,   0f),   // V2  –Ω–∞ –æ—Å–∏ +Y
        floatArrayOf(  0f, -C3,   0f),   // V3  –Ω–∞ –æ—Å–∏ -Y
        floatArrayOf(  0f,   0f,  C3),   // V4  –Ω–∞ –æ—Å–∏ +Z
        floatArrayOf(  0f,   0f, -C3),   // V5  –Ω–∞ –æ—Å–∏ -Z
```

**–ö—É–±–∏—á–µ—Å–∫–∏–µ (V6‚ÄìV13)** ‚Äî –∫–∞–∫ –≤–µ—Ä—à–∏–Ω—ã –∫—É–±–∞, –≤—Å–µ —Ç—Ä–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–≤–Ω—ã ¬±C1:

```kotlin
        floatArrayOf( C1,  C1,  C1),     // V6  +++
        floatArrayOf( C1,  C1, -C1),     // V7  ++-
        floatArrayOf( C1, -C1,  C1),     // V8  +-+
        floatArrayOf( C1, -C1, -C1),     // V9  +--
        floatArrayOf(-C1,  C1,  C1),     // V10 -++
        floatArrayOf(-C1,  C1, -C1),     // V11 -+-
        floatArrayOf(-C1, -C1,  C1),     // V12 --+
        floatArrayOf(-C1, -C1, -C1),     // V13 ---
```

**–û—Å—Ç–∞–ª—å–Ω—ã–µ (V14‚ÄìV37)** ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ C0, C1, C2 –≤ —Ä–∞–∑–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞–∫–∞–º–∏.
–≠—Ç–æ 24 –≤–µ—Ä—à–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ ¬´–∑–∞–ø–æ–ª–Ω—è—é—Ç¬ª —Ñ–æ—Ä–º—É –º–µ–∂–¥—É –æ—Å–µ–≤—ã–º–∏ –∏ –∫—É–±–∏—á–µ—Å–∫–∏–º–∏:

```kotlin
        floatArrayOf( C0,  C2,  C1),     // V14
        floatArrayOf( C0, -C2, -C1),     // V15
        // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–æ V37
        floatArrayOf(-C2, -C0, -C1),     // V37
    )
```

> üéØ **–ê–Ω–∞–ª–æ–≥–∏—è**: –ø—Ä–µ–¥—Å—Ç–∞–≤—å –≥–ª–æ–±—É—Å. –û—Å–µ–≤—ã–µ –≤–µ—Ä—à–∏–Ω—ã ‚Äî —ç—Ç–æ —Å–µ–≤–µ—Ä–Ω—ã–π –ø–æ–ª—é—Å, —é–∂–Ω—ã–π –ø–æ–ª—é—Å
> –∏ —á–µ—Ç—ã—Ä–µ —Ç–æ—á–∫–∏ –Ω–∞ —ç–∫–≤–∞—Ç–æ—Ä–µ. –ö—É–±–∏—á–µ—Å–∫–∏–µ ‚Äî –∫–∞–∫ —É–≥–ª—ã –∫–æ—Ä–æ–±–∫–∏ –≤–Ω—É—Ç—Ä–∏ –≥–ª–æ–±—É—Å–∞. –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî
> —Ç–æ—á–∫–∏ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –Ω–∏–º–∏.

---

## 4. üî∫ –ì—Ä–∞–Ω–∏ ‚Äî 24 –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∞

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ –≤–µ—Ä—à–∏–Ω—ã —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –≥—Ä–∞–Ω–∏. –ö–∞–∂–¥–∞—è –≥—Ä–∞–Ω—å ‚Äî —ç—Ç–æ 5 –∏–Ω–¥–µ–∫—Å–æ–≤
–∏–∑ –º–∞—Å—Å–∏–≤–∞ `polyVerts`:

```kotlin
    val faces = arrayOf(
        intArrayOf(15, 29,  5, 23,  9),   // –ì—Ä–∞–Ω—å 0: –≤–µ—Ä—à–∏–Ω—ã V15, V29, V5, V23, V9
        intArrayOf(33, 21,  1, 37, 13),   // –ì—Ä–∞–Ω—å 1
        intArrayOf(21, 33,  3, 17, 12),   // –ì—Ä–∞–Ω—å 2
        // ... –≤—Å–µ–≥–æ 24 –≥—Ä–∞–Ω–∏
        intArrayOf(14, 28,  4, 22,  6),   // –ì—Ä–∞–Ω—å 23
    )
```

> üí° –ü–æ—Ä—è–¥–æ–∫ –≤–µ—Ä—à–∏–Ω –≤ –∫–∞–∂–¥–æ–π –≥—Ä–∞–Ω–∏ ‚Äî **–ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–∏** (CCW) –ø—Ä–∏ –≤–∑–≥–ª—è–¥–µ —Å–Ω–∞—Ä—É–∂–∏.
> –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è OpenGL: –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ–±—Ö–æ–¥–∞ –≤–µ—Ä—à–∏–Ω –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≥–¥–µ –ª–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≥—Ä–∞–Ω–∏.
> –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã —Å—Ç–æ–∏—à—å —Å–Ω–∞—Ä—É–∂–∏ –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫–∞ –∏ –æ–±–≤–æ–¥–∏—à—å –ø–∞–ª—å—Ü–µ–º –∫–æ–Ω—Ç—É—Ä –≥—Ä–∞–Ω–∏ ‚Äî –ø–∞–ª–µ—Ü –¥–≤–∏–≥–∞–µ—Ç—Å—è
> –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–∏.

---

## 5. üé® –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤

–ö–∞–∂–¥–æ–π –∏–∑ 24 –≥—Ä–∞–Ω–µ–π –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Å–≤–æ–π —Ü–≤–µ—Ç. –§–æ—Ä–º–∞—Ç ‚Äî `(R, G, B, A)`,
–≥–¥–µ –∫–∞–∂–¥–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ—Ç `0.0` –¥–æ `1.0`:

```kotlin
    val faceColorPalette = arrayOf(
        floatArrayOf(0.95f, 0.25f, 0.20f, 1.0f),  // –ö—Ä–∞—Å–Ω—ã–π
        floatArrayOf(0.20f, 0.80f, 0.30f, 1.0f),  // –ó–µ–ª—ë–Ω—ã–π
        floatArrayOf(0.20f, 0.40f, 0.95f, 1.0f),  // –°–∏–Ω–∏–π
        // ... –ø–æ –æ–¥–Ω–æ–º—É —Ü–≤–µ—Ç—É –Ω–∞ –≥—Ä–∞–Ω—å, –≤—Å–µ–≥–æ 24
        floatArrayOf(0.75f, 0.40f, 0.40f, 1.0f),  // –õ–æ—Å–æ—Å—ë–≤—ã–π
    )
```

> üé® –ü–æ—á–µ–º—É `A = 1.0f`? –≠—Ç–æ –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª (–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å). `1.0` = –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π.
> –ï—Å–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å `0.5`, –≥—Ä–∞–Ω—å –±—É–¥–µ—Ç –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π (–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –µ—â—ë –≤–∫–ª—é—á–∏—Ç—å –±–ª–µ–Ω–¥–∏–Ω–≥).

---

## 6. ‚úÇÔ∏è –¢—Ä–∏–∞–Ω–≥—É–ª—è—Ü–∏—è ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∏ –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏

–í–æ—Ç —Ç—É—Ç —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ. OpenGL –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∞–∫–æ–µ –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî –æ–Ω –ø–æ–Ω–∏–º–∞–µ—Ç
—Ç–æ–ª—å–∫–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏. –ù—É–∂–Ω–æ –Ω–∞—Ä–µ–∑–∞—Ç—å –∫–∞–∂–¥—ã–π –ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞ –∫—É—Å–æ—á–∫–∏.

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **–≤–µ–µ—Ä–Ω—É—é —Ç—Ä–∏–∞–Ω–≥—É–ª—è—Ü–∏—é** (fan triangulation):

1. –ù–∞—Ö–æ–¥–∏–º **—Ü–µ–Ω—Ç—Ä–æ–∏–¥** –≥—Ä–∞–Ω–∏ ‚Äî —Å—Ä–µ–¥–Ω—é—é —Ç–æ—á–∫—É –≤—Å–µ—Ö –ø—è—Ç–∏ –≤–µ—Ä—à–∏–Ω
2. –ü—Ä–æ–≤–æ–¥–∏–º –ª–∏–Ω–∏–∏ –æ—Ç —Ü–µ–Ω—Ç—Ä–æ–∏–¥–∞ –∫ –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω–µ
3. –ü–æ–ª—É—á–∞–µ—Ç—Å—è 5 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ ‚Äî –∫–∞–∫ –¥–æ–ª—å–∫–∏ –ø–∏—Ü—Ü—ã üçï

```
        V1
       / | \
      /  |  \
     /  —Ü–µ–Ω—Ç—Ä \
    / ‚ï±    ‚ï≤   \
   V0 -------- V2
```

–í –∫–æ–¥–µ:

```kotlin
    val faceVertices = mutableListOf<Float>()
    val faceColors = mutableListOf<Float>()

    faces.forEachIndexed { faceIndex, face ->
        val color = faceColorPalette[faceIndex]
        val verts = face.map { polyVerts[it] }

        // –¶–µ–Ω—Ç—Ä–æ–∏–¥ = —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø—è—Ç–∏ –≤–µ—Ä—à–∏–Ω
        val cx = verts.map { it[0] }.average().toFloat()
        val cy = verts.map { it[1] }.average().toFloat()
        val cz = verts.map { it[2] }.average().toFloat()

        for (i in 0 until 5) {
            val a = floatArrayOf(cx, cy, cz)  // –¶–µ–Ω—Ç—Ä –≥—Ä–∞–Ω–∏
            val b = verts[i]                   // –¢–µ–∫—É—â–∞—è –≤–µ—Ä—à–∏–Ω–∞
            val c = verts[(i + 1) % 5]         // –°–ª–µ–¥—É—é—â–∞—è –≤–µ—Ä—à–∏–Ω–∞ (% 5 –∑–∞–º—ã–∫–∞–µ—Ç —Ü–∏–∫–ª)
```

> üí° `(i + 1) % 5` ‚Äî —ç—Ç–æ —Ç—Ä—é–∫ —Å –æ—Å—Ç–∞—Ç–∫–æ–º –æ—Ç –¥–µ–ª–µ–Ω–∏—è. –ö–æ–≥–¥–∞ `i = 4`, –ø–æ–ª—É—á–∞–µ—Ç—Å—è
> `(4 + 1) % 5 = 0` ‚Äî –º—ã –∑–∞–º—ã–∫–∞–µ–º—Å—è –æ–±—Ä–∞—Ç–Ω–æ –∫ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—à–∏–Ω–µ. –ö–∞–∫ –∏–¥—Ç–∏ –ø–æ –∫—Ä—É–≥—É.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç—Ä—ë—Ö –≤–µ—Ä—à–∏–Ω –≤ –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫,
–∞ —Ü–≤–µ—Ç –≥—Ä–∞–Ω–∏ –¥—É–±–ª–∏—Ä—É–µ–º —Ç—Ä–∏–∂–¥—ã (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—É—é –≤–µ—Ä—à–∏–Ω—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞):

```kotlin
            // (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ—Ä–º–∞–ª–∏, –æ –Ω–µ–π ‚Äî –Ω–∏–∂–µ)
            faceVertices.addAll(a.toList())
            faceVertices.addAll(b.toList())
            faceVertices.addAll(c.toList())

            // –í—Å–µ —Ç—Ä–∏ –≤–µ—Ä—à–∏–Ω—ã –æ–¥–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ‚Äî –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
            faceColors.addAll(color.toList())
            faceColors.addAll(color.toList())
            faceColors.addAll(color.toList())
        }
    }

    return Pair(faceVertices.toFloatArray(), faceColors.toFloatArray())
}
```

> üìä **–ò—Ç–æ–≥–æ**: 24 –≥—Ä–∞–Ω–∏ √ó 5 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ = **120 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤** = 360 –≤–µ—Ä—à–∏–Ω.

---

## 7. üß≠ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ä–º–∞–ª–µ–π ‚Äî —á—Ç–æ–±—ã –≥—Ä–∞–Ω–∏ —Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–∞—Ä—É–∂—É

–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞: –∫–æ–≥–¥–∞ –º—ã –Ω–∞—Ä–µ–∑–∞–µ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –º–æ–≥—É—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è
¬´–≤—ã–≤–µ—Ä–Ω—É—Ç—ã–º–∏¬ª ‚Äî –∏—Ö –ª–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤–Ω—É—Ç—Ä—å —Ñ–∏–≥—É—Ä—ã, –∞ –Ω–µ –Ω–∞—Ä—É–∂—É.
–í OpenGL —Ç–∞–∫–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ –±—É–¥—É—Ç –Ω–µ–≤–∏–¥–∏–º—ã (–∏–ª–∏ –æ—Ç—Ä–∏—Å—É—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ).

–ù–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ **–Ω–æ—Ä–º–∞–ª—å** –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞.
–ù–æ—Ä–º–∞–ª—å ‚Äî —ç—Ç–æ –≤–µ–∫—Ç–æ—Ä, –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω—ã–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞.
–ï—Å–ª–∏ –æ–Ω –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞—Ä—É–∂—É –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ —Ñ–∏–≥—É—Ä—ã ‚Äî –≤—Å—ë —Ö–æ—Ä–æ—à–æ.
–ï—Å–ª–∏ –≤–Ω—É—Ç—Ä—å ‚Äî –º–µ–Ω—è–µ–º –ø–æ—Ä—è–¥–æ–∫ –¥–≤—É—Ö –≤–µ—Ä—à–∏–Ω.

```kotlin
            // –†—ë–±—Ä–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: –æ—Ç —Ü–µ–Ω—Ç—Ä–æ–∏–¥–∞ –∫ –≤–µ—Ä—à–∏–Ω–∞–º B –∏ C
            val ab = floatArrayOf(b[0] - a[0], b[1] - a[1], b[2] - a[2])
            val ac = floatArrayOf(c[0] - a[0], c[1] - a[1], c[2] - a[2])

            // –ù–æ—Ä–º–∞–ª—å = –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ AB √ó AC
            val normal = cross(ab, ac)

            // –¶–µ–Ω—Ç—Ä —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
            val tcx = (a[0] + b[0] + c[0]) / 3f
            val tcy = (a[1] + b[1] + c[1]) / 3f
            val tcz = (a[2] + b[2] + c[2]) / 3f

            // –°–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏ —Å –≤–µ–∫—Ç–æ—Ä–æ–º –∫ —Ü–µ–Ω—Ç—Ä—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
            val dot = normal[0] * tcx + normal[1] * tcy + normal[2] * tcz
```

**–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?**

–°–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (dot product) –Ω–æ—Ä–º–∞–ª–∏ –∏ –≤–µ–∫—Ç–æ—Ä–∞ –æ—Ç –Ω–∞—á–∞–ª–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫ —Ü–µ–Ω—Ç—Ä—É
—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –ª–∏ –æ–Ω–∏:

- `dot >= 0` ‚Üí –Ω–æ—Ä–º–∞–ª—å —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞—Ä—É–∂—É ‚úÖ ‚Üí –ø–æ—Ä—è–¥–æ–∫ –≤–µ—Ä—à–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- `dot < 0` ‚Üí –Ω–æ—Ä–º–∞–ª—å —Å–º–æ—Ç—Ä–∏—Ç –≤–Ω—É—Ç—Ä—å ‚ùå ‚Üí –º–µ–Ω—è–µ–º B –∏ C –º–µ—Å—Ç–∞–º–∏

```kotlin
            if (dot >= 0) {
                // –í—Å—ë –æ–∫ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º A, B, C
                faceVertices.addAll(a.toList())
                faceVertices.addAll(b.toList())
                faceVertices.addAll(c.toList())
            } else {
                // –ü–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º A, C, B
                faceVertices.addAll(a.toList())
                faceVertices.addAll(c.toList())
                faceVertices.addAll(b.toList())
            }
```

> üéØ **–ê–Ω–∞–ª–æ–≥–∏—è**: –ø—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –Ω–∞–¥—É–≤–∞–µ—à—å –≤–æ–∑–¥—É—à–Ω—ã–π —à–∞—Ä–∏–∫. –ö–∞–∂–¥—ã–π –∫—É—Å–æ—á–µ–∫ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
> –¥–æ–ª–∂–µ–Ω ¬´—Å–º–æ—Ç—Ä–µ—Ç—å¬ª –Ω–∞—Ä—É–∂—É. –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –∫—É—Å–æ–∫ –≤–¥—Ä—É–≥ –∑–∞–≥–Ω—É–ª—Å—è –≤–Ω—É—Ç—Ä—å ‚Äî –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –µ–≥–æ.
> –°–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–ø—Ä–æ—Å–∏—Ç—å ¬´—ç–π, —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞—Ä—É–∂—É –∏–ª–∏ –≤–Ω—É—Ç—Ä—å?¬ª.

> ü§ì **–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?** –ù–∞—à –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤–æ–∫—Ä—É–≥ –Ω–∞—á–∞–ª–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (0, 0, 0).
> –í–µ–∫—Ç–æ—Ä –æ—Ç (0,0,0) –∫ —Ü–µ–Ω—Ç—Ä—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –≤—Å–µ–≥–¥–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞—Ä—É–∂—É. –ï—Å–ª–∏ –Ω–æ—Ä–º–∞–ª—å
> —Å–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å —ç—Ç–∏–º –≤–µ–∫—Ç–æ—Ä–æ–º (dot > 0), –∑–Ω–∞—á–∏—Ç –æ–Ω–∞ —Ç–æ–∂–µ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞—Ä—É–∂—É.

---

## 8. ‚úñÔ∏è –í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

–§—É–Ω–∫—Ü–∏—è `cross` –≤—ã—á–∏—Å–ª—è–µ—Ç **–≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** –¥–≤—É—Ö 3D-–≤–µ–∫—Ç–æ—Ä–æ–≤.
–†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –Ω–æ–≤—ã–π –≤–µ–∫—Ç–æ—Ä, –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω—ã–π –æ–±–æ–∏–º –≤—Ö–æ–¥–Ω—ã–º.

```kotlin
private fun cross(a: FloatArray, b: FloatArray): FloatArray {
    return floatArrayOf(
        a[1] * b[2] - a[2] * b[1],   // x
        a[2] * b[0] - a[0] * b[2],   // y
        a[0] * b[1] - a[1] * b[0]    // z
    )
}
```

> üí° –ú–Ω–µ–º–æ–Ω–∏–∫–∞ –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã: **¬´yz-zy, zx-xz, xy-yx¬ª**.
> –ö–∞–∂–¥–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ¬´—Å–æ—Å–µ–¥–Ω–∏—Ö¬ª –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫—Ä–µ—Å—Ç-–Ω–∞–∫—Ä–µ—Å—Ç, –ø–æ—ç—Ç–æ–º—É
> –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–∫—Ä–µ—Å—Ç–æ–≤–æ–µ¬ª (cross) –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ.

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –¥–ª—è –æ–¥–Ω–æ–π —Ü–µ–ª–∏: –Ω–∞–π—Ç–∏ –Ω–æ—Ä–º–∞–ª—å –∫ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫—É.
–ë–µ—Ä—ë–º –¥–≤–∞ —Ä–µ–±—Ä–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä—ã ‚Üí –∏—Ö –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ = –≤–µ–∫—Ç–æ—Ä,
—Ç–æ—Ä—á–∞—â–∏–π –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –∏–∑ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞.

---

## 9. üñå –®–µ–π–¥–µ—Ä–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

–®–µ–π–¥–µ—Ä—ã ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ GPU. –£ –Ω–∞—Å –∏—Ö –¥–≤–∞:

**–í–µ—Ä—à–∏–Ω–Ω—ã–π —à–µ–π–¥–µ—Ä** (`cube_vert.vert`) ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—É—é –≤–µ—Ä—à–∏–Ω—É:
```glsl
uniform mat4 uMVPMatrix;      // –ú–∞—Ç—Ä–∏—Ü–∞ Model-View-Projection
attribute vec4 vPosition;      // –ü–æ–∑–∏—Ü–∏—è –≤–µ—Ä—à–∏–Ω—ã
attribute vec4 vColor;         // –¶–≤–µ—Ç –≤–µ—Ä—à–∏–Ω—ã
varying vec4 fColor;           // –ü–µ—Ä–µ–¥–∞—ë–º —Ü–≤–µ—Ç –≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–Ω—ã–π —à–µ–π–¥–µ—Ä

void main() {
    gl_Position = uMVPMatrix * vPosition;  // –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é
    fColor = vColor;                       // –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º —Ü–≤–µ—Ç –¥–∞–ª—å—à–µ
}
```

**–§—Ä–∞–≥–º–µ–Ω—Ç–Ω—ã–π —à–µ–π–¥–µ—Ä** (`cube_frag.frag`) ‚Äî –∑–∞–¥–∞—ë—Ç —Ü–≤–µ—Ç –∫–∞–∂–¥–æ–≥–æ –ø–∏–∫—Å–µ–ª—è:
```glsl
precision mediump float;
varying vec4 fColor;           // –ü–æ–ª—É—á–∞–µ–º —Ü–≤–µ—Ç –æ—Ç –≤–µ—Ä—à–∏–Ω–Ω–æ–≥–æ —à–µ–π–¥–µ—Ä–∞

void main() {
    gl_FragColor = fColor;     // –ü—Ä–æ—Å—Ç–æ –∫—Ä–∞—Å–∏–º –ø–∏–∫—Å–µ–ª—å —ç—Ç–∏–º —Ü–≤–µ—Ç–æ–º
}
```

–í –Ω–∞—à–µ–º –∫–ª–∞—Å—Å–µ –º—ã –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –ª–∏–Ω–∫—É–µ–º –æ–±–∞ —à–µ–π–¥–µ—Ä–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π:

```kotlin
private var _program: Int = createProgramGLES30(res, R.raw.cube_vert, R.raw.cube_frag)
```

> üéØ **–ê–Ω–∞–ª–æ–≥–∏—è**: –≤–µ—Ä—à–∏–Ω–Ω—ã–π —à–µ–π–¥–µ—Ä ‚Äî —ç—Ç–æ ¬´–≥–¥–µ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ—á–∫—É –Ω–∞ —ç–∫—Ä–∞–Ω–µ¬ª.
> –§—Ä–∞–≥–º–µ–Ω—Ç–Ω—ã–π —à–µ–π–¥–µ—Ä ‚Äî —ç—Ç–æ ¬´–∫–∞–∫–∏–º —Ü–≤–µ—Ç–æ–º –∑–∞–∫—Ä–∞—Å–∏—Ç—å –ø–∏–∫—Å–µ–ª—å –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏¬ª.
> `_program` ‚Äî —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–∑ –æ–±–æ–∏—Ö —à–µ–π–¥–µ—Ä–æ–≤, –≥–æ—Ç–æ–≤–∞—è –∫ –∑–∞–ø—É—Å–∫—É –Ω–∞ GPU.

---

## 10. üìê –ú–∞—Ç—Ä–∏—Ü—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

–ß—Ç–æ–±—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–µ—Ä—à–∏–Ω –≤ –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ, OpenGL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–ø–æ—á–∫—É
–º–∞—Ç—Ä–∏—á–Ω—ã—Ö —É–º–Ω–æ–∂–µ–Ω–∏–π: **Model ‚Üí View ‚Üí Projection** (MVP).

```kotlin
// Model ‚Äî –∫—É–¥–∞ –∏ –∫–∞–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–∏—Ç—å –æ–±—ä–µ–∫—Ç (–º–∞—Å—à—Ç–∞–±, –ø–æ–≤–æ—Ä–æ—Ç, –ø–æ–∑–∏—Ü–∏—è)
private val _modelMatrix = FloatArray(16)

// View √ó Model ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
private val _viewModelMatrix = FloatArray(16)

// Projection √ó View √ó Model ‚Äî –∏—Ç–æ–≥–æ–≤–∞—è –º–∞—Ç—Ä–∏—Ü–∞, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—É—á–∏—Ç —à–µ–π–¥–µ—Ä
private val _mvpMatrix = FloatArray(16)
```

–ê —Ç–∞–∫–∂–µ —Ö—ç–Ω–¥–ª—ã ‚Äî ¬´—É–∫–∞–∑–∞—Ç–µ–ª–∏¬ª –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —à–µ–π–¥–µ—Ä–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```kotlin
private var _mvpMatrixHandle: Int = 0   // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ uMVPMatrix –≤ —à–µ–π–¥–µ—Ä–µ
private var _positionHandle: Int = 0    // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ vPosition –≤ —à–µ–π–¥–µ—Ä–µ
private var _colorHandle: Int = 0       // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ vColor –≤ —à–µ–π–¥–µ—Ä–µ
```

> üí° **–ß—Ç–æ —Ç–∞–∫–æ–µ ¬´–º–∞—Ç—Ä–∏—Ü–∞ 4√ó4¬ª?** –≠—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –∏–∑ 16 —á–∏—Å–µ–ª, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç
> —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ 3D. –ö–∞–∂–¥–∞—è –º–∞—Ç—Ä–∏—Ü–∞ (Model, View, Projection) –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ–π —ç—Ç–∞–ø:
>
> | –ú–∞—Ç—Ä–∏—Ü–∞ | –ó–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç | –ê–Ω–∞–ª–æ–≥–∏—è |
> |---------|----------------|----------|
> | **Model** | –ú–∞—Å—à—Ç–∞–±, –ø–æ–≤–æ—Ä–æ—Ç, –ø–æ–∑–∏—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞ | –¢—ã –∫—Ä—É—Ç–∏—à—å —Ñ–∏–≥—É—Ä—É –≤ —Ä—É–∫–∞—Ö |
> | **View** | –ü–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã | –¢—ã —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ —Ñ–∏–≥—É—Ä—É —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞ |
> | **Projection** | –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞ (–¥–∞–ª—ë–∫–æ–µ ‚Äî –º–µ–Ω—å—à–µ) | –õ–∏–Ω–∑–∞ –∫–∞–º–µ—Ä—ã |

---

## 11. üåâ –ë—É—Ñ–µ—Ä—ã ‚Äî –º–æ—Å—Ç –º–µ–∂–¥—É CPU –∏ GPU

GPU –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —á–∏—Ç–∞—Ç—å –æ–±—ã—á–Ω—ã–µ Kotlin-–º–∞—Å—Å–∏–≤—ã. –ù—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
–≤ **–Ω–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å** —á–µ—Ä–µ–∑ `ByteBuffer` ‚Üí `FloatBuffer`:

```kotlin
private val _vertexBuffer: FloatBuffer = ByteBuffer
    .allocateDirect(vertices.size * Float.SIZE_BYTES) // –í—ã–¥–µ–ª—è–µ–º —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ –±–∞–π—Ç
    .order(ByteOrder.nativeOrder())                   // –ü–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç –∫–∞–∫ —É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    .asFloatBuffer()                                  // –†–∞–±–æ—Ç–∞–µ–º –∫–∞–∫ —Å –º–∞—Å—Å–∏–≤–æ–º float
    .apply {
        put(vertices)   // –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
        position(0)     // –ö—É—Ä—Å–æ—Ä –≤ –Ω–∞—á–∞–ª–æ (GPU –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å —Å –ø–æ–∑–∏—Ü–∏–∏ 0)
    }
```

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —Ü–≤–µ—Ç–æ–≤:

```kotlin
private val _colorBuffer: FloatBuffer = ByteBuffer
    .allocateDirect(colors.size * Float.SIZE_BYTES)
    .order(ByteOrder.nativeOrder())
    .asFloatBuffer()
    .apply {
        put(colors)
        position(0)
    }
```

> üéØ **–ê–Ω–∞–ª–æ–≥–∏—è**: GPU ‚Äî —ç—Ç–æ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π –ø–æ–≤–∞—Ä. –û–Ω –Ω–µ —á–∏—Ç–∞–µ—Ç –ø–æ-—Ä—É—Å—Å–∫–∏ (Kotlin-–º–∞—Å—Å–∏–≤—ã).
> –ù—É–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ä–µ—Ü–µ–ø—Ç –Ω–∞ –µ–≥–æ —è–∑—ã–∫ (–Ω–∞—Ç–∏–≤–Ω—ã–π `FloatBuffer`) –∏ –ø–æ–ª–æ–∂–∏—Ç—å –Ω–∞ —Å—Ç–æ–ª
> (`allocateDirect`). `position(0)` ‚Äî —ç—Ç–æ –∫–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–≥—É –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

> ‚ö†Ô∏è `allocateDirect` –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –≤–Ω–µ –∫—É—á–∏ JVM ‚Äî –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–∞–º—è—Ç–∏.
> –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è OpenGL, –∏–Ω–∞—á–µ GPU –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

---

## 12. üé¨ –§—É–Ω–∫—Ü–∏—è draw ‚Äî —Å–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–º–µ—Å—Ç–µ

–§—É–Ω–∫—Ü–∏—è `draw` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä (~60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É). –í–æ—Ç —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç –ø–æ —à–∞–≥–∞–º:

### –®–∞–≥ 1: –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Ç—Ä–∏—Ü—É –º–æ–¥–µ–ª–∏

```kotlin
fun draw(
    state: PentagonalIcositetrahedronState,
    viewMatrix: FloatArray,
    projectionMatrix: FloatArray,
) {
    // –ù–∞—á–∏–Ω–∞–µ–º —Å ¬´—á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞¬ª ‚Äî –µ–¥–∏–Ω–∏—á–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ (–Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç)
    Matrix.setIdentityM(_modelMatrix, 0)

    // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º ‚Äî —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–ª–∏ —É–º–µ–Ω—å—à–∞–µ–º —Ñ–∏–≥—É—Ä—É
    Matrix.scaleM(_modelMatrix, 0, state.scale, state.scale, state.scale)

    // –ü–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ X (–ø–∞–ª–µ—Ü –¥–≤–∏–≥–∞–µ—Ç—Å—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ ‚Üí —Ñ–∏–≥—É—Ä–∞ –≤—Ä–∞—â–∞–µ—Ç—Å—è ¬´–≤–ø–µ—Ä—ë–¥-–Ω–∞–∑–∞–¥¬ª)
    Matrix.rotateM(_modelMatrix, 0, state.rotation.y, 1f, 0f, 0f)

    // –ü–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y (–ø–∞–ª–µ—Ü –¥–≤–∏–≥–∞–µ—Ç—Å—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ ‚Üí —Ñ–∏–≥—É—Ä–∞ –≤—Ä–∞—â–∞–µ—Ç—Å—è ¬´–≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ¬ª)
    Matrix.rotateM(_modelMatrix, 0, state.rotation.x, 0f, 1f, 0f)
```

> üí° –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ: `rotation.y` —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤–æ—Ä–æ—Ç–æ–º –≤–æ–∫—Ä—É–≥ –æ—Å–∏ **X**, –∞ `rotation.x` ‚Äî
> –≤–æ–∫—Ä—É–≥ –æ—Å–∏ **Y**. –≠—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞! –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–∞–ª—å—Ü–∞ (`x`) –≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–≥—É—Ä—É
> –≤–æ–∫—Ä—É–≥ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ (`Y`), –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.

### –®–∞–≥ 2: –í—ã—á–∏—Å–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é MVP-–º–∞—Ç—Ä–∏—Ü—É

```kotlin
    // View √ó Model (–∫–∞–º–µ—Ä–∞ ¬´–≤–∏–¥–∏—Ç¬ª –ø–æ–≤—ë—Ä–Ω—É—Ç—ã–π –æ–±—ä–µ–∫—Ç)
    Matrix.multiplyMM(_viewModelMatrix, 0, viewMatrix, 0, _modelMatrix, 0)

    // Projection √ó (View √ó Model) (–¥–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—É)
    Matrix.multiplyMM(_mvpMatrix, 0, projectionMatrix, 0, _viewModelMatrix, 0)
```

### –®–∞–≥ 3: –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —à–µ–π–¥–µ—Ä–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É

```kotlin
    GLES30.glUseProgram(_program)
```

–≠—Ç–æ –∫–∞–∫ —Å–∫–∞–∑–∞—Ç—å GPU: ¬´–∏—Å–ø–æ–ª—å–∑—É–π –≤–æ—Ç —ç—Ç–æ—Ç –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è¬ª.

### –®–∞–≥ 4: –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ –≤ —à–µ–π–¥–µ—Ä

**4a. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–µ—Ä—à–∏–Ω:**

```kotlin
    _positionHandle = GLES30.glGetAttribLocation(_program, "vPosition")
    GLES30.glEnableVertexAttribArray(_positionHandle)
    GLES30.glVertexAttribPointer(
        _positionHandle,
        COORDS_PER_VERTEX,                    // 3 —á–∏—Å–ª–∞ –Ω–∞ –≤–µ—Ä—à–∏–Ω—É
        GLES30.GL_FLOAT,                      // –¢–∏–ø ‚Äî float
        false,                                // –ù–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å
        COORDS_PER_VERTEX * Float.SIZE_BYTES, // –®–∞–≥: 3 √ó 4 = 12 –±–∞–π—Ç
        _vertexBuffer,                        // –û—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
    )
```

**4b. –¶–≤–µ—Ç–∞ –≤–µ—Ä—à–∏–Ω:**

```kotlin
    _colorHandle = GLES30.glGetAttribLocation(_program, "vColor")
    GLES30.glEnableVertexAttribArray(_colorHandle)
    GLES30.glVertexAttribPointer(
        _colorHandle,
        COLORS_PER_VERTEX,                    // 4 —á–∏—Å–ª–∞ –Ω–∞ –≤–µ—Ä—à–∏–Ω—É (RGBA)
        GLES30.GL_FLOAT,
        false,
        COLORS_PER_VERTEX * Float.SIZE_BYTES, // 4 √ó 4 = 16 –±–∞–π—Ç
        _colorBuffer,
    )
```

**4c. MVP-–º–∞—Ç—Ä–∏—Ü–∞:**

```kotlin
    _mvpMatrixHandle = GLES30.glGetUniformLocation(_program, "uMVPMatrix")
    GLES30.glUniformMatrix4fv(_mvpMatrixHandle, 1, false, _mvpMatrix, 0)
```

> üí° –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `attribute` –∏ `uniform`:
> - **attribute** ‚Äî –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã (–ø–æ–∑–∏—Ü–∏—è, —Ü–≤–µ—Ç)
> - **uniform** ‚Äî –¥–∞–Ω–Ω—ã–µ, –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—à–∏–Ω –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ (–º–∞—Ç—Ä–∏—Ü–∞ MVP)

### –®–∞–≥ 5: –†–∏—Å—É–µ–º!

```kotlin
    // –†–∏—Å—É–µ–º –≤—Å–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ –æ–¥–Ω–∏–º –≤—ã–∑–æ–≤–æ–º
    GLES30.glDrawArrays(GLES30.GL_TRIANGLES, 0, vertexCount)

    // –£–±–∏—Ä–∞–µ–º –∑–∞ —Å–æ–±–æ–π ‚Äî –æ—Ç–∫–ª—é—á–∞–µ–º –º–∞—Å—Å–∏–≤—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    GLES30.glDisableVertexAttribArray(_positionHandle)
    GLES30.glDisableVertexAttribArray(_colorHandle)
}
```

`GL_TRIANGLES` –≥–æ–≤–æ—Ä–∏—Ç GPU: ¬´–±–µ—Ä–∏ –≤–µ—Ä—à–∏–Ω—ã –ø–æ —Ç—Ä–∏ —à—Ç—É–∫–∏ –∏ —Ä–∏—Å—É–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏¬ª.

---

## 13. üó∫ –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞

–í–æ—Ç –∫–∞–∫ –≤—Å–µ —á–∞—Å—Ç–∏ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π:

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  38 –≤–µ—Ä—à–∏–Ω (DMcCooey)‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  24 –ø—è—Ç–∏—É–≥–æ–ª—å–Ω—ã—Ö    ‚îÇ
                    ‚îÇ  –≥—Ä–∞–Ω–∏ (–∏–Ω–¥–µ–∫—Å—ã)     ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ  –¢—Ä–∏–∞–Ω–≥—É–ª—è—Ü–∏—è (–≤–µ–µ—Ä –æ—Ç —Ü–µ–Ω—Ç—Ä–æ–∏–¥–∞)
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  120 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤   ‚îÇ
                    ‚îÇ  (360 –≤–µ—Ä—à–∏–Ω)        ‚îÇ
                    ‚îÇ  + –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ—Ä–º–∞–ª–µ–π ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ                               ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  FloatBuffer –≤–µ—Ä—à–∏–Ω ‚îÇ         ‚îÇ  FloatBuffer —Ü–≤–µ—Ç–æ–≤  ‚îÇ
    ‚îÇ  (–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å)  ‚îÇ         ‚îÇ  (–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å)   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ                               ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ  –®–µ–π–¥–µ—Ä–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ ‚îÇ
                ‚îÇ  (–≤–µ—Ä—à–∏–Ω–Ω—ã–π + —Ñ—Ä–∞–≥.) ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ  MVP-–º–∞—Ç—Ä–∏—Ü–∞
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ   glDrawArrays()    ‚îÇ
                ‚îÇ   ‚Üí GPU —Ä–∏—Å—É–µ—Ç! üñ•  ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞:**

1. `draw()` –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π `state` (–ø–æ–≤–æ—Ä–æ—Ç, –º–∞—Å—à—Ç–∞–±)
2. –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è Model-–º–∞—Ç—Ä–∏—Ü–∞ (–º–∞—Å—à—Ç–∞–± ‚Üí –ø–æ–≤–æ—Ä–æ—Ç)
3. Model √ó View √ó Projection = MVP
4. MVP + –±—É—Ñ–µ—Ä—ã –≤–µ—Ä—à–∏–Ω/—Ü–≤–µ—Ç–æ–≤ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —à–µ–π–¥–µ—Ä
5. `glDrawArrays` ‚Üí GPU —Ä–∏—Å—É–µ—Ç 120 —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤
6. –ù–∞ —ç–∫—Ä–∞–Ω–µ ‚Äî –∫—Ä–∞—Å–∏–≤—ã–π —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–π –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∏–∫ üî∑

---

> üéâ **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –≤
> `PentagonalIcositetrahedronRenderer`. –ü–æ–ø—Ä–æ–±—É–π –Ω–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ —Å –Ω—É–ª—è,
> —Å–≤–µ—Ä—è—è—Å—å —Å —ç—Ç–∏–º –≥–∞–π–¥–æ–º. –£–¥–∞—á–∏!
